<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Local authority methodology - PolicyEngine UK data</title><meta property="og:title" content="Local authority methodology - PolicyEngine UK data"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png"/><meta property="og:image" content="/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png"/><link rel="stylesheet" href="/policyengine-uk-data/build/_assets/app-SDGCW62C.css"/><link rel="stylesheet" href="/policyengine-uk-data/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/policyengine-uk-data/favicon.ico"/><link rel="stylesheet" href="/policyengine-uk-data/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100vw;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-screen top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="2rem" height="2rem" class="m-1"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/policyengine-uk-data/"><div class="myst-home-link-logo p-1 mr-3 dark:bg-white dark:rounded"><img src="/policyengine-uk-data/build/logo-9c440b39ee984e9186535b5cd7be8410.png" class="h-9" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-8 h-8 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-screen xl:pointer-events-none overflow-auto max-xl:min-w-[300px] hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px] lg:hidden"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="PolicyEngine UK data" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/policyengine-uk-data/">PolicyEngine UK data</a><a title="Methodology" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/policyengine-uk-data/methodology">Methodology</a><a title="Imputations" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/policyengine-uk-data/imputations">Imputations</a><div data-state="closed" class="w-full"><div class="myst-toc-item flex flex-row w-full gap-2 px-2 my-1 text-left rounded-lg outline-none hover:bg-slate-300/30"><a title="Validation" class="block break-words focus:outline outline-blue-200 outline-2 rounded py-2 grow" href="/policyengine-uk-data/validation">Validation</a><button class="self-center flex-none rounded-md group hover:bg-slate-300/30 focus:outline outline-blue-200 outline-2" aria-label="Open Folder" type="button" aria-controls="radix-:R16psp:" aria-expanded="false" data-state="closed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="transition-transform duration-300 group-data-[state=open]:rotate-90 text-text-slate-700 dark:text-slate-100" height="1.5rem" width="1.5rem"><path fill-rule="evenodd" d="M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z" clip-rule="evenodd"></path></svg></button></div><div data-state="closed" id="radix-:R16psp:" hidden="" class="pl-3 pr-[2px] collapsible-content"></div></div><a title="Pension contributions" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/policyengine-uk-data/pension-contributions">Pension contributions</a><a title="Constituency methodology" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/policyengine-uk-data/constituency-methodology">Constituency methodology</a><a title="Local authority methodology" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/policyengine-uk-data/la-methodology">Local authority methodology</a></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/policyengine/policyengine-uk-data" title="GitHub Repository: policyengine/policyengine-uk-data" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/policyengine/policyengine-uk-data/edit/main/docs/LA_methodology.ipynb" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">Local authority methodology</h1><header class="myst-fm-authors-affiliations mt-4 not-prose"><div class="myst-fm-authors-list"><span class="myst-fm-author font-semibold text-sm myst-fm-author-item inline-block"><button class="myst-fm-author-popover focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78ucp:" data-state="closed"><span class="myst-fm-author-name">PolicyEngine Team</span></button></span></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><div id="e1PvC3d7Cl" class="myst-jp-nb-block relative group/block"><h2 id="introduction" class="relative group"><span class="heading-text">Introduction</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#introduction" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>When policy changes in the UK - taxes, benefits, or public spending - it affects places and people differently. PolicyEngine UK builds tools to analyze incomes, jobs, and population patterns in each local authoirity district. This documentation explains how we create a microsimulation model that works at the local authoirity level. The system combines workplace surveys of jobs and earnings, HMRC tax records, and population statistics. We estimate income distributions, and optimize geographic weights.</p><p>This guide shows how to use PolicyEngine UK for local authoirity analysis. We start with data collection, transform it for modeling, and build tools to examine policies. The guide provides examples and code to implement these methods. Users can measure changes in household budgets, track employment, and understand economic patterns on different local authoirity districts. This document starts with data collection from workplace surveys, tax records, and population counts, then explains how we convert this data into usable forms through income brackets. It concludes with technical details about accuracy measurement and calibration, plus example code for analysis and visualization.</p></div><div id="DANIQcUks3" class="myst-jp-nb-block relative group/block"><h2 id="data" class="relative group"><span class="heading-text">Data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#data" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>In this section, we describe three main data sources that form the foundation of our local authority level analysis: earning and jobs data from NOMIS ASHE, income statistics from HMRC, and population age distributions from the House of Commons Library.</p><h3 id="earning-and-jobs-data" class="relative group"><span class="heading-text">Earning and jobs data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#earning-and-jobs-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Data is extracted from NOMIS Annual Survey of Hours and Earnings (ASHE) - workplace analysis dataset, containing number of jobs and earnings percentiles for all UK local authority districts from the <a target="_blank" rel="noreferrer" href="https://www.nomisweb.co.uk/datasets/ashe" class="">NOMIS website</a>. This dataset is stored as <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/nomis_earning_jobs_data.xlsx" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>nomis_earning_jobs_data.xlsx</code></a>. To download the data, follow the variable selection process shown in the image below:</p><img id="alV3lpkuXA" style="margin-left:auto;margin-right:auto" src="/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png" data-canonical-url="pictures/nomis_screenshot2.png" class=""/></div><div id="TDl6SHSdZj" class="myst-jp-nb-block relative group/block"><h3 id="income-data" class="relative group"><span class="heading-text">Income data</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#income-data" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Income data for UK local authorities is obtained from <a target="_blank" rel="noreferrer" href="https://www.gov.uk/government/statistics/income-and-tax-by-borough-and-district-or-unitary-authority-confidence-intervals" class="">HMRC</a>. This dataset provides detailed information about income and tax by local authorities with confidence intervals, and is stored as <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>total_income.csv</code></a>, including two key variables:</p><ul><li><p><a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv#L1" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>total_income_count</code></a>: the total number of taxpayers in each local authority</p></li><li><p><a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv#L1" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>total_income_amount</code></a>: the total amount of income for all taxpayers in each local authority</p></li></ul><p>We use these measures to identify similar local authorities when employment distribution data is missing. Our approach assumes that local authorities with similar income patterns (measured by both taxpayer counts and total income) will have similar earnings distributions. The following table shows the dataset:</p></div><div id="hdSrpHp1bg" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import pandas as pd
from itables import init_notebook_mode, show
import itables.options as opt
opt.maxBytes = &quot;1MB&quot;
init_notebook_mode(all_interactive=True)

pd.read_csv(&quot;../policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="TuwghVBuyI3nQpxncRtkO" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div><div><div class="p-2.5">Loading...</div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="afThHQynh4" class="myst-jp-nb-block relative group/block"><h3 id="population-data-by-age" class="relative group"><span class="heading-text">Population data by age</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#population-data-by-age" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>Population data by age groups for UK local authorities can be downloaded from the <a target="_blank" rel="noreferrer" href="https://www.nomisweb.co.uk/datasets/pestsyoala" class="">ONS data dashboard</a>. The dataset provides detailed age breakdowns for each UK local authority, containing population counts for every age from 0 to 90+ years old across all local authorities in England, Wales, Northern Ireland, and Scotland. The data is stored as <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>age.csv</code></a>. The following table shows the dataset:</p></div><div id="E1CfdejNCp" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import pandas as pd
from itables import init_notebook_mode, show
import itables.options as opt
opt.maxBytes = &quot;1MB&quot;
init_notebook_mode(all_interactive=True)

pd.read_csv(&quot;../policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="skT-DRQErcnx8ERpVlGm7" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div><div><div class="p-2.5">Loading...</div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="bnTL7il5l4" class="myst-jp-nb-block relative group/block"><h2 id="preprocessing" class="relative group"><span class="heading-text">Preprocessing</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#preprocessing" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>In this section, we detail a preprocessing step necessary for our local authority level analysis: converting earnings percentiles into practical income brackets.</p><h3 id="convert-earning-percentiles-to-brackets" class="relative group"><span class="heading-text">Convert earning percentiles to brackets</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#convert-earning-percentiles-to-brackets" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>To analyze earnings data effectively, we convert earning percentiles into earning brackets through the following process:</p><ol start="1"><li><p>First, we estimate the full distribution of earnings by:</p><ul><li><p>Using known percentile data (10th to 90th) from the ASHE dataset</p></li><li><p>Extending this to estimate the 90th-99th percentiles using ratios derived from <a target="_blank" rel="noreferrer" href="https://www.gov.uk/government/statistics/percentile-points-from-1-to-99-for-total-income-before-and-after-tax#:~:text=Details,in%20the%20Background%20Quality%20Report" class="">this government statistics report</a></p></li></ul></li><li><p>This estimation allows us to map earnings data into brackets that align with policy thresholds.</p></li></ol><p>After estimating the full earnings distribution, we convert the data into income brackets. We calculate the number of jobs and total earnings for each local authority and income bracket based on the estimated earnings distribution. When we encounter local authorities with missing data, we estimate their earnings distribution pattern using data from local authorities with similar total number of taxpayers and total income levels.</p><p>The script <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/create_employment_incomes.py" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>create_employment_incomes.py</code></a> generates <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>employment_income.csv</code></a> containing number of jobs (<a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv#L1" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>employment_income_count</code></a>) and total earnings (<a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv#L1" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>employment_income_amount</code></a>) for each local authority and income bracket. The following table shows employment and income across different brackets for local authorities:</p></div><div id="I7wcQ61kkv" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import pandas as pd
from itables import init_notebook_mode, show
import itables.options as opt
opt.maxBytes = &quot;1MB&quot;
init_notebook_mode(all_interactive=True)

pd.read_csv(&quot;../policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="o-kM_j-e7kVwT73M1uQHz" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left mb-5"><div><div class="p-2.5">Loading...</div></div><div><div class="p-2.5">Loading...</div></div><div><div class="p-2.5">Loading...</div></div></div></div><div id="LEBfe0m5dW" class="myst-jp-nb-block relative group/block"><h2 id="methodology" class="relative group"><span class="heading-text">Methodology</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#methodology" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>This section describes our approach to creating accurate local authority level estimates through three key components: a loss function for evaluating accuracy, a calibration process for optimizing weights, and the mathematical framework behind the optimization. To see how well this methodology performs in practice, you can check our detailed <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/docs/validation/local_authorities.ipynb" class="italic" target="_blank" rel="noreferrer" data-state="closed">validation results page</a> comparing our estimates against actual data at both local authority and national levels.</p><h3 id="loss-function" class="relative group"><span class="heading-text">Loss function</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#loss-function" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The file <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>loss.py</code></a> defines a function <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L8" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>create_local_authority_target_matrix</code></a> that creates target matrices for comparing simulated data against actual local authority level data. The following process outlines how the function processes:</p><ol start="1"><li><p>Takes three main input parameters: dataset (defaults to <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L15" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>enhanced_frs_2022_23</code></a>), time_period (defaults to 2025), and an optional reform parameter for policy changes.</p></li><li><p>Reads three files containing real data: <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>age.csv</code></a>, <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>total_income.csv</code></a>, and <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>employment_income.csv</code></a>.</p></li><li><p>Creates a PolicyEngine Microsimulation object using the specified dataset and reform parameters.</p></li><li><p>Creates two main matrices: <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L29" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>matrix</code></a> for simulated values from PolicyEngine, and <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L30" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>y</code></a> for actual target values from both HMRC (income data) and ONS (age data).</p></li><li><p>Calculates total income metrics at the national level, computing both total amounts and counts of people with income.</p></li><li><p>Processes age distributions by creating 10-year age bands from 0 to 80, calculating how many people fall into each band.</p></li><li><p>Processes both counts and amounts for different income bands between £12,570 and £70,000, excluding people under 16 for employment income.</p></li><li><p>Maps individual-level results to household level throughout the <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L33" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>sim.map_result()</code></a> function.</p></li><li><p>The function returns both the simulated matrix and the target matrix <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L33" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>(matrix, y)</code></a> which can be used for comparing the simulation results against actual data.</p></li></ol></div><div id="ouv2bHMnmh" class="myst-jp-nb-block relative group/block"><h3 id="calibration-function" class="relative group"><span class="heading-text">Calibration function</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#calibration-function" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>The file <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>calibrate.py</code></a> defines a main <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L16" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>calibrate()</code></a> function that performs weight calibration for local authority level analysis.</p><ol start="1"><li><p>It imports necessary functions and matrices from other files including <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L17" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>create_local_authority_target_matrix</code></a>, <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L21" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>create_national_target_matrix</code></a> from <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>loss.py</code></a>.</p></li><li><p>Sets up initial matrices using the <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L17" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>create_local_authority_target_matrix</code></a> and <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L21" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>create_national_target_matrix</code></a> functions for both local authority and national level data.</p></li><li><p>Creates a Microsimulation object using the <a href="https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L25" class="italic" target="_blank" rel="noreferrer" data-state="closed"><code>enhanced_frs_2022_23</code></a> dataset.</p></li><li><p>Initializes weights for 360 local authority districts x 100180 households, starting with the log of household weights divided by local authority district count.</p></li><li><p>Converts all the matrices and weights into PyTorch tensors to enable optimization.</p></li><li><p>Defines a loss function that calculates and combines both local authority level and national-level mean squared errors into a single loss value.</p></li><li><p>Uses Adam optimizer with a learning rate of 0.1 to minimize the loss over 512 epochs.</p></li><li><p>Every 100 epochs during optimization, it updates the weights and saves the current weights to a <code>weights.h5</code> file.</p></li></ol></div><div id="OWHwW1LB85" class="myst-jp-nb-block relative group/block"><h3 id="optimization-mathematics" class="relative group"><span class="heading-text">Optimization mathematics</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#optimization-mathematics" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>In this part, we explain the mathematics behind the calibration process that we discussed above. The optimization uses a two-part loss function that balances local authority level and national-level accuracy, combining both local and national targets into a single optimization problem. The mathematical formulation can be expressed as follows:</p><p>For the local authority level component, we have:</p><ul><li><p>A set of households (<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span></span>) with known characteristics (<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>e</mi><mi>t</mi><mi>r</mi><mi>i</mi><mi>c</mi><msub><mi>s</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">metrics_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9456em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">i</span><span class="mord mathnormal">c</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>) like income, age, etc.</p></li><li><p>A set of local authorities (<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span></span>) with known target values (<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">y_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>) from official statistics</p></li><li><p>Weights in log space (<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">w_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span>) that we need to optimize for each household in each local authority</p></li></ul><p>Using these components, we calculate predicted local authority level statistics. For each local authority metric (e.g. total income), the predicted value is:</p><div id="utAYKPVnyg" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>pred</mtext><mi>c</mi></msub><mo>=</mo><munder><mo>∑</mo><mi>j</mi></munder><mo stretchy="false">(</mo><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo><mo>×</mo><msub><mtext>metrics</mtext><mi>j</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{pred}_c = \sum_j (\exp(w_{ij}) \times \text{metrics}_j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mord"><span class="mord text"><span class="mord">pred</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4638em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mop">exp</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord text"><span class="mord">metrics</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#utAYKPVnyg" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->1<!-- -->)</a></div></div><p>where <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext>metrics</mtext><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">\text{metrics}_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.954em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord text"><span class="mord">metrics</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span> represents the household-level characteristics for that specific metric (e.g. household income). We use exponential of weights to ensure they stay positive.</p><p>To measure how well our predictions match the real local authority data, we calculate the local authority mean squared error:</p><div id="buS71qohxq" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>MSE</mtext><mi>c</mi></msub><mo>=</mo><mtext>mean</mtext><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msub><mtext>pred</mtext><mi>c</mi></msub><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>y</mi><mi>c</mi></msub><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{MSE}_c = \text{mean}((\text{pred}_c / (1 + y_c) - 1)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">MSE</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">mean</span></span><span class="mopen">((</span><span class="mord"><span class="mord text"><span class="mord">pred</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#buS71qohxq" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->2<!-- -->)</a></div></div><p>where <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>y</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">y_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span> are the actual target values from official statistics for each local authority. We use relative error (dividing by <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>+</mo><msub><mi>y</mi><mi>c</mi></msub></mrow><annotation encoding="application/x-tex">1 + y_c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span>) to make errors comparable across different scales of metrics.</p><p>For the national component, we need to ensure our local authority level adjustments don’t distort national-level statistics. We aggregate across all local authorities:</p><div id="tqR5vjkJuA" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>pred</mtext><mi>n</mi></msub><mo>=</mo><munder><mo>∑</mo><mi>i</mi></munder><mo stretchy="false">(</mo><munder><mo>∑</mo><mi>j</mi></munder><mi>exp</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mi>w</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>×</mo><msub><mtext>metrics</mtext><mtext>national</mtext></msub></mrow><annotation encoding="application/x-tex">\text{pred}_n = \sum_i (\sum_j \exp(w_{ij})) \times \text{metrics}_\text{national}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9386em;vertical-align:-0.2441em;"></span><span class="mord"><span class="mord text"><span class="mord">pred</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4638em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.05em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">exp</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">))</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8179em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">metrics</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">national</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#tqR5vjkJuA" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->3<!-- -->)</a></div></div><p>with corresponding mean squared error to measure deviation from national targets:</p><div id="NB6CrUIslF" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mtext>MSE</mtext><mi>n</mi></msub><mo>=</mo><mtext>mean</mtext><mo stretchy="false">(</mo><mo stretchy="false">(</mo><msub><mtext>pred</mtext><mi>n</mi></msub><mi mathvariant="normal">/</mi><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>y</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mo>−</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{MSE}_n = \text{mean}((\text{pred}_n / (1 + y_n) - 1)^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">MSE</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">mean</span></span><span class="mopen">((</span><span class="mord"><span class="mord text"><span class="mord">pred</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.0573em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#NB6CrUIslF" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->4<!-- -->)</a></div></div><p>The total loss combines both local authority and national errors:</p><div id="fhXaXmt2lB" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><msub><mtext>MSE</mtext><mi>c</mi></msub><mo>+</mo><msub><mtext>MSE</mtext><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">L = \text{MSE}_c + \text{MSE}_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">MSE</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord text"><span class="mord">MSE</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#fhXaXmt2lB" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->5<!-- -->)</a></div></div><p>We initialize the weights using the original household weights from the survey data:</p><div id="ieeWijSLmM" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mtext>initial</mtext></msub><mo>=</mo><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><msub><mtext>household</mtext><mrow><mi>w</mi><mi>e</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi></mrow></msub><mi mathvariant="normal">/</mi><mn>650</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w_{\text{initial}} = \ln(\text{household}_{weight}/650)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">initial</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord"><span class="mord text"><span class="mord">household</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord">/650</span><span class="mclose">)</span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#ieeWijSLmM" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->6<!-- -->)</a></div></div><p>where 650 is the number of local authorities. These weights are then iteratively optimized using the Adam (Adaptive Moment Estimation) optimizer with a learning rate of 0.1. The optimization process runs for 512 epochs, with the weights being updated in each iteration:</p><div id="PXLRudnw5S" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>w</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>=</mo><msub><mi>w</mi><mi>t</mi></msub><mo>−</mo><mn>0.1</mn><mo>×</mo><mi mathvariant="normal">∇</mi><mi>L</mi><mo stretchy="false">(</mo><msub><mi>w</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">w_{t+1} = w_t - 0.1 \times \nabla L(w_t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">0.1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∇</span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#PXLRudnw5S" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->7<!-- -->)</a></div></div><p>This formulation ensures that the optimized weights maintain both local local authority at the local authority level and global accuracy for national-level statistics. The Adam optimizer adaptively adjusts the weights to minimize both local authority level and national-level errors simultaneously, providing efficient convergence through adaptive learning rates and momentum. The resulting optimized weights allow us to accurately reweight household survey data to match both local authority level and national statistics to obtain accurate estimates of income distributions, demographics, and policy impacts for each parliamentary local authority while maintaining local authority with national totals.</p></div><div class="myst-backmatter-parts"></div><div class="myst-footer-links flex pt-10 mb-10 space-x-4"><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-prev" href="/policyengine-uk-data/constituency-methodology"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">PolicyEngine UK data</div>Constituency methodology</div></div></a></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/policyengine-uk-data/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-N76G4W6Y.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/root-AA24SA6C.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/_shared/chunk-AH7OE64W.js"/><link rel="modulepreload" href="/policyengine-uk-data/build/routes/$-5SFLQWPV.js"/><script>window.__remixContext = {"url":"/la-methodology","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.7.0","options":{"logo":"/policyengine-uk-data/build/logo-9c440b39ee984e9186535b5cd7be8410.png","folders":true},"nav":[],"actions":[],"projects":[{"title":"PolicyEngine UK data","authors":[{"nameParsed":{"given":"PolicyEngine","family":"Team","literal":"PolicyEngine Team"},"name":"PolicyEngine Team","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/policyengine/policyengine-uk-data","copyright":"2024","toc":[{"file":"intro.md"},{"file":"methodology.ipynb"},{"file":"imputations.md"},{"children":[{"file":"validation/national.ipynb"},{"file":"validation/constituencies.ipynb"},{"file":"validation/local_authorities.ipynb"}],"file":"validation/index.md"},{"file":"pension_contributions.ipynb"},{"file":"constituency_methodology.ipynb"},{"file":"LA_methodology.ipynb"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"methodology","title":"Methodology","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"imputations","title":"Imputations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"validation.index","title":"Validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"validation.national","title":"National dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"validation.constituencies","title":"Constituency dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"validation.local-authorities","title":"Local authority dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"pension-contributions","title":"Pension contributions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"constituency-methodology","title":"Constituency methodology","description":"","date":"","thumbnail":"/policyengine-uk-data/build/nomis_screenshot1-1c5aacbebc004b4f300b10cfa9c042b8.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"la-methodology","title":"Local authority methodology","description":"","date":"","thumbnail":"/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/policyengine-uk-data"},"routes/$":{"config":{"version":3,"myst":"1.7.0","options":{"logo":"/policyengine-uk-data/build/logo-9c440b39ee984e9186535b5cd7be8410.png","folders":true},"nav":[],"actions":[],"projects":[{"title":"PolicyEngine UK data","authors":[{"nameParsed":{"given":"PolicyEngine","family":"Team","literal":"PolicyEngine Team"},"name":"PolicyEngine Team","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/policyengine/policyengine-uk-data","copyright":"2024","toc":[{"file":"intro.md"},{"file":"methodology.ipynb"},{"file":"imputations.md"},{"children":[{"file":"validation/national.ipynb"},{"file":"validation/constituencies.ipynb"},{"file":"validation/local_authorities.ipynb"}],"file":"validation/index.md"},{"file":"pension_contributions.ipynb"},{"file":"constituency_methodology.ipynb"},{"file":"LA_methodology.ipynb"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"methodology","title":"Methodology","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"imputations","title":"Imputations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"validation.index","title":"Validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"validation.national","title":"National dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"validation.constituencies","title":"Constituency dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"validation.local-authorities","title":"Local authority dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"pension-contributions","title":"Pension contributions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"constituency-methodology","title":"Constituency methodology","description":"","date":"","thumbnail":"/policyengine-uk-data/build/nomis_screenshot1-1c5aacbebc004b4f300b10cfa9c042b8.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"la-methodology","title":"Local authority methodology","description":"","date":"","thumbnail":"/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"page":{"version":3,"kind":"Notebook","sha256":"012da5dc9408ff0a40da613893e4dedaa5ff708fc90023b0f99146d87337ea99","slug":"la-methodology","location":"/LA_methodology.ipynb","dependencies":[],"frontmatter":{"title":"Local authority methodology","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"base","language":"python"},"authors":[{"nameParsed":{"given":"PolicyEngine","family":"Team","literal":"PolicyEngine Team"},"name":"PolicyEngine Team","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/policyengine/policyengine-uk-data","copyright":"2024","source_url":"https://github.com/policyengine/policyengine-uk-data/blob/main/docs/LA_methodology.ipynb","edit_url":"https://github.com/policyengine/policyengine-uk-data/edit/main/docs/LA_methodology.ipynb","thumbnail":"/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png","exports":[{"format":"ipynb","filename":"LA_methodology.ipynb","url":"/policyengine-uk-data/build/LA_methodology-d60fe46b7097a6399813960dc0d6ec89.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Introduction","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mj5xiAvINa"}],"identifier":"introduction","label":"Introduction","html_id":"introduction","implicit":true,"key":"NZ2ggxCgTk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"When policy changes in the UK - taxes, benefits, or public spending - it affects places and people differently. PolicyEngine UK builds tools to analyze incomes, jobs, and population patterns in each local authoirity district. This documentation explains how we create a microsimulation model that works at the local authoirity level. The system combines workplace surveys of jobs and earnings, HMRC tax records, and population statistics. We estimate income distributions, and optimize geographic weights.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"oexqv25kaY"}],"key":"Wr6oq8ZG2q"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This guide shows how to use PolicyEngine UK for local authoirity analysis. We start with data collection, transform it for modeling, and build tools to examine policies. The guide provides examples and code to implement these methods. Users can measure changes in household budgets, track employment, and understand economic patterns on different local authoirity districts. This document starts with data collection from workplace surveys, tax records, and population counts, then explains how we convert this data into usable forms through income brackets. It concludes with technical details about accuracy measurement and calibration, plus example code for analysis and visualization.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"gxB7aqYoIe"}],"key":"GcuQsu8OLH"}],"key":"e1PvC3d7Cl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UAiDkIbQkC"}],"identifier":"data","label":"Data","html_id":"data","implicit":true,"key":"mJzUUbAIjJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In this section, we describe three main data sources that form the foundation of our local authority level analysis: earning and jobs data from NOMIS ASHE, income statistics from HMRC, and population age distributions from the House of Commons Library.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"fn5EkjUqJk"}],"key":"VTxiOepc6l"},{"type":"heading","depth":3,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Earning and jobs data","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"N5th50HCGh"}],"identifier":"earning-and-jobs-data","label":"Earning and jobs data","html_id":"earning-and-jobs-data","implicit":true,"key":"qZA8cO4T5I"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Data is extracted from NOMIS Annual Survey of Hours and Earnings (ASHE) - workplace analysis dataset, containing number of jobs and earnings percentiles for all UK local authority districts from the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ddqAyPLUb8"},{"type":"link","url":"https://www.nomisweb.co.uk/datasets/ashe","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"NOMIS website","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"qaPtFvXcMS"}],"urlSource":"https://www.nomisweb.co.uk/datasets/ashe","key":"g5N1fJtmCo"},{"type":"text","value":". This dataset is stored as ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"tb7hXxR3zK"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/nomis_earning_jobs_data.xlsx","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"nomis_earning_jobs_data.xlsx","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"RB0BXp7F0E"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/nomis_earning_jobs_data.xlsx","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/nomis_earning_jobs_data.xlsx","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/nomis_earning_jobs_data.xlsx"},"internal":false,"protocol":"github","key":"mEn16D0mJk"},{"type":"text","value":". To download the data, follow the variable selection process shown in the image below:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Jlr61DAUwB"}],"key":"lyQ5L6BQWZ"},{"type":"image","url":"/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"alV3lpkuXA","urlSource":"pictures/nomis_screenshot2.png"}],"key":"DANIQcUks3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Income data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EH5X2TUz95"}],"identifier":"income-data","label":"Income data","html_id":"income-data","implicit":true,"key":"ZEIU6p0COU"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Income data for UK local authorities is obtained from ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"jg5Zxvjx8H"},{"type":"link","url":"https://www.gov.uk/government/statistics/income-and-tax-by-borough-and-district-or-unitary-authority-confidence-intervals","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"HMRC","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"INJrUmdc60"}],"urlSource":"https://www.gov.uk/government/statistics/income-and-tax-by-borough-and-district-or-unitary-authority-confidence-intervals","key":"EVC8jTOHhS"},{"type":"text","value":". This dataset provides detailed information about income and tax by local authorities with confidence intervals, and is stored as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"LP0ZFdC88r"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"total_income.csv","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gluehVSGP7"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv"},"internal":false,"protocol":"github","key":"HK58xd4Ot5"},{"type":"text","value":", including two key variables:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"erK1QVHqVJ"}],"key":"hkJMKsp5hj"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv#L1","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"total_income_count","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bCkCjkXA7C"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv#L1","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","from":1,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv"},"internal":false,"protocol":"github","key":"csq0leuiLS"},{"type":"text","value":": the total number of taxpayers in each local authority","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"LhPWzeEGPk"}],"key":"OAUunUgdUo"}],"key":"rkfZPeObns"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv#L1","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"total_income_amount","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"mkGUKHt71I"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv#L1","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","from":1,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv"},"internal":false,"protocol":"github","key":"th2Z0mRvmI"},{"type":"text","value":": the total amount of income for all taxpayers in each local authority","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"VBVyC41BPV"}],"key":"Aoy50hw14M"}],"key":"mtJfYC3jNk"}],"key":"lwhTrLfBhH"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"We use these measures to identify similar local authorities when employment distribution data is missing. Our approach assumes that local authorities with similar income patterns (measured by both taxpayer counts and total income) will have similar earnings distributions. The following table shows the dataset:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"aCRU1JNCEN"}],"key":"kF3CSBYPT1"}],"key":"TDl6SHSdZj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nfrom itables import init_notebook_mode, show\nimport itables.options as opt\nopt.maxBytes = \"1MB\"\ninit_notebook_mode(all_interactive=True)\n\npd.read_csv(\"../policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv\")","key":"Qx4nltGZAk"},{"type":"outputs","id":"TuwghVBuyI3nQpxncRtkO","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cscript\u003e\n    let is_dark_theme = function () {\n        // Jupyter Lab\n        if ('jpThemeLight' in document.body.dataset)\n            return (document.body.dataset.jpThemeLight === \"false\");\n\n        // VS Code\n        if ('vscodeThemeKind' in document.body.dataset)\n            return document.body.dataset.vscodeThemeKind.includes('dark');\n\n        // Jupyter Book\n        if ('theme' in document.documentElement.dataset)\n            return document.documentElement.dataset.theme.includes('dark');\n\n        // Default\n        return window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n\n    if (is_dark_theme()) {\n        document.documentElement.classList.add('dark');\n    }\n    else {\n        document.documentElement.classList.remove('dark');\n    }\n\u003c/script\u003e\n","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},"children":[],"key":"veAc4dORDb"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"c6ab3fbdab1ff94600e51c14dfe3f701","path":"/policyengine-uk-data/build/c6ab3fbdab1ff94600e51c14dfe3f701.html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},"children":[],"key":"noNpM1SEXf"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":1,"metadata":{},"data":{"text/html":{"content":"\u003ctable id=\"itables_ca83706d_e848_4a3e_bd7f_85ea375d7d62\" class=\"display nowrap\" data-quarto-disable-processing=\"true\" style=\"table-layout:auto;width:auto;margin:auto;caption-side:bottom\"\u003e\n\u003cthead\u003e\n    \u003ctr style=\"text-align: right;\"\u003e\n      \n      \u003cth\u003ecode\u003c/th\u003e\n      \u003cth\u003ename\u003c/th\u003e\n      \u003cth\u003etotal_income_count\u003c/th\u003e\n      \u003cth\u003etotal_income_amount\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\u003ctbody\u003e\u003ctr\u003e\n\u003ctd style=\"vertical-align:middle; text-align:left\"\u003e\n\u003cdiv style=\"float:left; margin-right: 10px;\"\u003e\n\u003ca href=https://mwouts.github.io/itables/\u003e\u003csvg class=\"main-svg\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\nwidth=\"64\" viewBox=\"0 0 500 400\" style=\"font-family: 'Droid Sans', sans-serif;\"\u003e\n    \u003cg style=\"fill:#d9d7fc\"\u003e\n        \u003cpath d=\"M100,400H500V357H100Z\" /\u003e\n        \u003cpath d=\"M100,300H400V257H100Z\" /\u003e\n        \u003cpath d=\"M0,200H400V157H0Z\" /\u003e\n        \u003cpath d=\"M100,100H500V57H100Z\" /\u003e\n        \u003cpath d=\"M100,350H500V307H100Z\" /\u003e\n        \u003cpath d=\"M100,250H400V207H100Z\" /\u003e\n        \u003cpath d=\"M0,150H400V107H0Z\" /\u003e\n        \u003cpath d=\"M100,50H500V7H100Z\" /\u003e\n    \u003c/g\u003e\n    \u003cg style=\"fill:#1a1366;stroke:#1a1366;\"\u003e\n   \u003crect x=\"100\" y=\"7\" width=\"400\" height=\"43\"\u003e\n    \u003canimate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"5s\"\n      repeatCount=\"indefinite\" /\u003e\n      \u003canimate\n      attributeName=\"x\"\n      values=\"100;100;500\"\n      dur=\"5s\"\n      repeatCount=\"indefinite\" /\u003e\n  \u003c/rect\u003e\n        \u003crect x=\"0\" y=\"107\" width=\"400\" height=\"43\"\u003e\n    \u003canimate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"3.5s\"\n      repeatCount=\"indefinite\" /\u003e\n    \u003canimate\n      attributeName=\"x\"\n      values=\"0;0;400\"\n      dur=\"3.5s\"\n      repeatCount=\"indefinite\" /\u003e\n  \u003c/rect\u003e\n        \u003crect x=\"100\" y=\"207\" width=\"300\" height=\"43\"\u003e\n    \u003canimate\n      attributeName=\"width\"\n      values=\"0;300;0\"\n      dur=\"3s\"\n      repeatCount=\"indefinite\" /\u003e\n    \u003canimate\n      attributeName=\"x\"\n      values=\"100;100;400\"\n      dur=\"3s\"\n      repeatCount=\"indefinite\" /\u003e\n  \u003c/rect\u003e\n        \u003crect x=\"100\" y=\"307\" width=\"400\" height=\"43\"\u003e\n    \u003canimate\n      attributeName=\"width\"\n      values=\"0;400;0\"\n      dur=\"4s\"\n      repeatCount=\"indefinite\" /\u003e\n      \u003canimate\n      attributeName=\"x\"\n      values=\"100;100;500\"\n      dur=\"4s\"\n      repeatCount=\"indefinite\" /\u003e\n  \u003c/rect\u003e\n        \u003cg style=\"fill:transparent;stroke-width:8; stroke-linejoin:round\" rx=\"5\"\u003e\n            \u003cg transform=\"translate(45 50) rotate(-45)\"\u003e\n                \u003ccircle r=\"33\" cx=\"0\" cy=\"0\" /\u003e\n                \u003crect x=\"-8\" y=\"32\" width=\"16\" height=\"30\" /\u003e\n            \u003c/g\u003e\n\n            \u003cg transform=\"translate(450 152)\"\u003e\n                \u003cpolyline points=\"-15,-20 -35,-20 -35,40 25,40 25,20\" /\u003e\n                \u003crect x=\"-15\" y=\"-40\" width=\"60\" height=\"60\" /\u003e\n            \u003c/g\u003e\n\n            \u003cg transform=\"translate(50 352)\"\u003e\n                \u003cpolygon points=\"-35,-5 0,-40 35,-5\" /\u003e\n                \u003cpolygon points=\"-35,10 0,45 35,10\" /\u003e\n            \u003c/g\u003e\n\n            \u003cg transform=\"translate(75 250)\"\u003e\n                \u003cpolyline points=\"-30,30 -60,0 -30,-30\" /\u003e\n                \u003cpolyline points=\"0,30 -30,0 0,-30\" /\u003e\n            \u003c/g\u003e\n\n            \u003cg transform=\"translate(425 250) rotate(180)\"\u003e\n                \u003cpolyline points=\"-30,30 -60,0 -30,-30\" /\u003e\n                \u003cpolyline points=\"0,30 -30,0 0,-30\" /\u003e\n            \u003c/g\u003e\n        \u003c/g\u003e\n    \u003c/g\u003e\n\u003c/svg\u003e\n\u003c/a\u003e\n\u003c/div\u003e\n\u003cdiv\u003e\nLoading ITables v2.2.3 from the \u003ccode\u003einit_notebook_mode\u003c/code\u003e cell...\n(need \u003ca href=https://mwouts.github.io/itables/troubleshooting.html\u003ehelp\u003c/a\u003e?)\u003c/td\u003e\n\u003c/div\u003e\n\u003c/tr\u003e\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cscript type=\"module\"\u003e\n    const { DataTable, jQuery: $ } = await import(window._datatables_src_for_itables_2_2_3);\n\n    document.querySelectorAll(\"#itables_ca83706d_e848_4a3e_bd7f_85ea375d7d62:not(.dataTable)\").forEach(table =\u003e {\n        if (!(table instanceof HTMLTableElement))\n            return;\n\n        // Define the table data\n        const data = [[\"E06000001\", \"Hartlepool UA\", 41000.0, 1258700000.0], [\"E06000002\", \"Middlesbrough UA\", 60000.0, 1812000000.0], [\"E06000003\", \"Redcar and Cleveland UA\", 65000.0, 1885000000.0], [\"E06000004\", \"Stockton-on-Tees UA\", 91000.0, 3039400000.0], [\"E06000005\", \"Darlington UA\", 52000.0, 1653600000.0], [\"E06000006\", \"Halton UA\", 61000.0, 1921500000.0], [\"E06000007\", \"Warrington UA\", 116000.0, 4245600000.0], [\"E06000008\", \"Blackburn with Darwen UA\", 63000.0, 1890000000.0], [\"E06000009\", \"Blackpool UA\", 60000.0, 1554000000.0], [\"E06000010\", \"Kingston upon Hull UA\", 113000.0, 3039700000.0], [\"E06000011\", \"East Riding of Yorkshire UA\", 180000.0, 6174000000.0], [\"E06000012\", \"North East Lincolnshire UA\", 70000.0, 2177000000.0], [\"E06000013\", \"North Lincolnshire UA\", 83000.0, 2556400000.0], [\"E06000014\", \"York UA\", 102000.0, 3692400000.0], [\"E06000015\", \"Derby UA\", 115000.0, 3542000000.0], [\"E06000016\", \"Leicester UA\", 135000.0, 3739500000.0], [\"E06000017\", \"Rutland UA\", 20000.0, 974000000.0], [\"E06000018\", \"Nottingham UA\", 114000.0, 3385800000.0], [\"E06000019\", \"Herefordshire UA\", 96000.0, 3235200000.0], [\"E06000020\", \"Telford and Wrekin UA\", 91000.0, 2793700000.0], [\"E06000021\", \"Stoke-on-Trent UA\", 110000.0, 2948000000.0], [\"E06000022\", \"Bath and North East Somerset UA\", 99000.0, 4138200000.0], [\"E06000023\", \"Bristol UA\", 227000.0, 8285500000.0], [\"E06000024\", \"North Somerset UA\", 120000.0, 4404000000.0], [\"E06000025\", \"South Gloucestershire UA\", 156000.0, 5725200000.0], [\"E06000026\", \"Plymouth UA\", 131000.0, 3890700000.0], [\"E06000027\", \"Torbay UA\", 89380.28169, 3524250000.0], [\"E06000030\", \"Swindon UA\", 121000.0, 4198700000.0], [\"E06000031\", \"Peterborough UA\", 97000.0, 3074900000.0], [\"E06000032\", \"Luton UA\", 89000.0, 2696700000.0], [\"E06000033\", \"Southend-on-Sea UA\", 84000.0, 3351600000.0], [\"E06000034\", \"Thurrock UA\", 89000.0, 3177300000.0], [\"E06000035\", \"Medway Towns UA\", 138000.0, 4761000000.0], [\"E06000036\", \"Bracknell Forest UA\", 68000.0, 3012400000.0], [\"E06000037\", \"West Berkshire UA\", 92000.0, 4305600000.0], [\"E06000038\", \"Reading UA\", 84000.0, 3452400000.0], [\"E06000039\", \"Slough UA\", 67000.0, 2318200000.0], [\"E06000040\", \"Windsor and Maidenhead UA\", 88000.0, 5438400000.0], [\"E06000041\", \"Wokingham UA\", 95000.0, 5054000000.0], [\"E06000042\", \"Milton Keynes UA\", 143000.0, 5519800000.0], [\"E06000043\", \"Brighton and Hove UA\", 134000.0, 5641400000.0], [\"E06000044\", \"Portsmouth UA\", 95000.0, 3030500000.0], [\"E06000045\", \"Southampton UA\", 115000.0, 3553500000.0], [\"E06000046\", \"Isle of Wight UA\", 66000.0, 2079000000.0], [\"E06000047\", \"County Durham UA\", 249000.0, 7544700000.0], [\"E06000049\", \"Cheshire East UA\", 221000.0, 10121800000.0], [\"E06000050\", \"Cheshire West and Chester UA\", 179000.0, 6784100000.0], [\"E06000051\", \"Shropshire UA\", 168000.0, 5863200000.0], [\"E06000052\", \"Cornwall UA\", 273000.0, 8517600000.0], [\"E06000053\", \"Isles of Scilly UA\", 89380.28169, 3524250000.0], [\"E06000054\", \"Wiltshire UA\", 272000.0, 10798400000.0], [\"E06000055\", \"Bedford UA\", 97000.0, 3695700000.0], [\"E06000056\", \"Central Bedfordshire UA\", 172000.0, 6673600000.0], [\"E06000057\", \"Northumberland UA\", 168000.0, 5611200000.0], [\"E06000058\", \"Bournemouth, Christchurch and Poole UA\", 201000.0, 7014900000.0], [\"E06000059\", \"Dorset UA\", 198000.0, 7048800000.0], [\"E06000060\", \"Buckinghamshire UA\", 309000.0, 16562400000.0], [\"E06000061\", \"North Northamptonshire UA\", 183000.0, 6313500000.0], [\"E06000062\", \"West Northamptonshire UA\", 230000.0, 8556000000.0], [\"E06000063\", \"Cumberland\", 89380.28169, 3524250000.0], [\"E06000064\", \"Westmorland and Furness\", 89380.28169, 3524250000.0], [\"E06000065\", \"North Yorkshire\", 89380.28169, 3524250000.0], [\"E06000066\", \"Somerset\", 89380.28169, 3524250000.0], [\"E07000008\", \"Cambridge\", 69000.0, 3394800000.0], [\"E07000009\", \"East Cambridgeshire\", 50000.0, 2010000000.0], [\"E07000010\", \"Fenland\", 52000.0, 1596400000.0], [\"E07000011\", \"Huntingdonshire\", 95000.0, 3695500000.0], [\"E07000012\", \"South Cambridgeshire\", 97000.0, 4723900000.0], [\"E07000032\", \"Amber Valley\", 65000.0, 2203500000.0], [\"E07000033\", \"Bolsover\", 38000.0, 1098200000.0], [\"E07000034\", \"Chesterfield\", 52000.0, 1554800000.0], [\"E07000035\", \"Derbyshire Dales\", 40000.0, 1512000000.0], [\"E07000036\", \"Erewash\", 58000.0, 1815400000.0], [\"E07000037\", \"High Peak\", 47000.0, 1626200000.0], [\"E07000038\", \"North East Derbyshire\", 52000.0, 1726400000.0], [\"E07000039\", \"South Derbyshire\", 59000.0, 2129900000.0], [\"E07000040\", \"East Devon\", 76000.0, 2728400000.0], [\"E07000041\", \"Exeter\", 60000.0, 2094000000.0], [\"E07000042\", \"Mid Devon\", 42000.0, 1440600000.0], [\"E07000043\", \"North Devon\", 47000.0, 1461700000.0], [\"E07000044\", \"South Hams\", 46000.0, 1729600000.0], [\"E07000045\", \"Teignbridge\", 71000.0, 2357200000.0], [\"E07000046\", \"Torridge\", 33000.0, 990000000.0], [\"E07000047\", \"West Devon\", 27000.0, 912600000.0], [\"E07000061\", \"Eastbourne\", 48000.0, 1502400000.0], [\"E07000062\", \"Hastings\", 39000.0, 1170000000.0], [\"E07000063\", \"Lewes\", 52000.0, 2059200000.0], [\"E07000064\", \"Rother\", 48000.0, 1852800000.0], [\"E07000065\", \"Wealden\", 85000.0, 3825000000.0], [\"E07000066\", \"Basildon\", 91000.0, 3521700000.0], [\"E07000067\", \"Braintree\", 82000.0, 3304600000.0], [\"E07000068\", \"Brentwood\", 41000.0, 2431300000.0], [\"E07000069\", \"Castle Point\", 46000.0, 1642200000.0], [\"E07000070\", \"Chelmsford\", 94000.0, 4361600000.0], [\"E07000071\", \"Colchester\", 96000.0, 3763200000.0], [\"E07000072\", \"Epping Forest\", 71000.0, 4820900000.0], [\"E07000073\", \"Harlow\", 44000.0, 1430000000.0], [\"E07000074\", \"Maldon\", 36000.0, 1422000000.0], [\"E07000075\", \"Rochford\", 47000.0, 1912900000.0], [\"E07000076\", \"Tendring\", 66000.0, 2085600000.0], [\"E07000077\", \"Uttlesford\", 54000.0, 2818800000.0], [\"E07000078\", \"Cheltenham\", 61000.0, 2446100000.0], [\"E07000079\", \"Cotswold\", 50000.0, 2525000000.0], [\"E07000080\", \"Forest of Dean\", 45000.0, 1408500000.0], [\"E07000081\", \"Gloucester\", 67000.0, 2010000000.0], [\"E07000082\", \"Stroud\", 64000.0, 2560000000.0], [\"E07000083\", \"Tewkesbury\", 53000.0, 1939800000.0], [\"E07000084\", \"Basingstoke and Deane\", 104000.0, 4586400000.0], [\"E07000085\", \"East Hampshire\", 70000.0, 3255000000.0], [\"E07000086\", \"Eastleigh\", 74000.0, 2797200000.0], [\"E07000087\", \"Fareham\", 62000.0, 2281600000.0], [\"E07000088\", \"Gosport\", 42000.0, 1360800000.0], [\"E07000089\", \"Hart\", 57000.0, 3021000000.0], [\"E07000090\", \"Havant\", 61000.0, 2025200000.0], [\"E07000091\", \"New Forest\", 93000.0, 3673500000.0], [\"E07000092\", \"Rushmoor\", 51000.0, 1785000000.0], [\"E07000093\", \"Test Valley\", 74000.0, 3167200000.0], [\"E07000094\", \"Winchester\", 67000.0, 3772100000.0], [\"E07000095\", \"Broxbourne\", 51000.0, 1938000000.0], [\"E07000096\", \"Dacorum\", 81000.0, 4082400000.0], [\"E07000098\", \"Hertsmere\", 60000.0, 3198000000.0], [\"E07000099\", \"North Hertfordshire\", 77000.0, 3580500000.0], [\"E07000102\", \"Three Rivers\", 49000.0, 2734200000.0], [\"E07000103\", \"Watford\", 53000.0, 2146500000.0], [\"E07000105\", \"Ashford\", 70000.0, 2674000000.0], [\"E07000106\", \"Canterbury\", 73000.0, 2722900000.0], [\"E07000107\", \"Dartford\", 59000.0, 2312800000.0], [\"E07000108\", \"Dover\", 60000.0, 1956000000.0], [\"E07000109\", \"Gravesham\", 54000.0, 1971000000.0], [\"E07000110\", \"Maidstone\", 93000.0, 3720000000.0], [\"E07000111\", \"Sevenoaks\", 68000.0, 4331600000.0], [\"E07000112\", \"Folkestone and Hythe\", 53000.0, 1860300000.0], [\"E07000113\", \"Swale\", 76000.0, 2568800000.0], [\"E07000114\", \"Thanet\", 65000.0, 2028000000.0], [\"E07000115\", \"Tonbridge and Malling\", 71000.0, 3337000000.0], [\"E07000116\", \"Tunbridge Wells\", 62000.0, 3453400000.0], [\"E07000117\", \"Burnley\", 39000.0, 1099800000.0], [\"E07000118\", \"Chorley\", 63000.0, 2198700000.0], [\"E07000119\", \"Fylde\", 45000.0, 1678500000.0], [\"E07000120\", \"Hyndburn\", 33000.0, 943800000.0], [\"E07000121\", \"Lancaster\", 65000.0, 2080000000.0], [\"E07000122\", \"Pendle\", 40000.0, 1120000000.0], [\"E07000123\", \"Preston\", 71000.0, 2215200000.0], [\"E07000124\", \"Ribble Valley\", 39000.0, 1454700000.0], [\"E07000125\", \"Rossendale\", 31000.0, 1069500000.0], [\"E07000126\", \"South Ribble\", 62000.0, 2052200000.0], [\"E07000127\", \"West Lancashire\", 57000.0, 2063400000.0], [\"E07000128\", \"Wyre\", 56000.0, 1825600000.0], [\"E07000129\", \"Blaby\", 55000.0, 1837000000.0], [\"E07000130\", \"Charnwood\", 90000.0, 3177000000.0], [\"E07000131\", \"Harborough\", 54000.0, 2386800000.0], [\"E07000132\", \"Hinckley and Bosworth\", 62000.0, 2151400000.0], [\"E07000133\", \"Melton\", 28000.0, 1019200000.0], [\"E07000134\", \"North West Leicestershire\", 57000.0, 2040600000.0], [\"E07000135\", \"Oadby and Wigston\", 27000.0, 982800000.0], [\"E07000136\", \"Boston\", 35000.0, 962500000.0], [\"E07000137\", \"East Lindsey\", 62000.0, 1816600000.0], [\"E07000138\", \"Lincoln\", 45000.0, 1345500000.0], [\"E07000139\", \"North Kesteven\", 61000.0, 2086200000.0], [\"E07000140\", \"South Holland\", 52000.0, 1580800000.0], [\"E07000141\", \"South Kesteven\", 76000.0, 2796800000.0], [\"E07000142\", \"West Lindsey\", 49000.0, 1729700000.0], [\"E07000143\", \"Breckland\", 72000.0, 2268000000.0], [\"E07000144\", \"Broadland\", 69000.0, 2339100000.0], [\"E07000145\", \"Great Yarmouth\", 48000.0, 1368000000.0], [\"E07000146\", \"King's Lynn and West Norfolk\", 75000.0, 2452500000.0], [\"E07000147\", \"North Norfolk\", 50000.0, 1625000000.0], [\"E07000148\", \"Norwich\", 67000.0, 2177500000.0], [\"E07000149\", \"South Norfolk\", 75000.0, 2775000000.0], [\"E07000170\", \"Ashfield\", 60000.0, 1716000000.0], [\"E07000171\", \"Bassetlaw\", 59000.0, 1935200000.0], [\"E07000172\", \"Broxtowe\", 58000.0, 1995200000.0], [\"E07000173\", \"Gedling\", 60000.0, 1968000000.0], [\"E07000174\", \"Mansfield\", 53000.0, 1542300000.0], [\"E07000175\", \"Newark and Sherwood\", 64000.0, 2188800000.0], [\"E07000176\", \"Rushcliffe\", 65000.0, 3009500000.0], [\"E07000177\", \"Cherwell\", 87000.0, 3514800000.0], [\"E07000178\", \"Oxford\", 70000.0, 3164000000.0], [\"E07000179\", \"South Oxfordshire\", 83000.0, 4556700000.0], [\"E07000180\", \"Vale of White Horse\", 78000.0, 3580200000.0], [\"E07000181\", \"West Oxfordshire\", 67000.0, 3035100000.0], [\"E07000192\", \"Cannock Chase\", 47000.0, 1410000000.0], [\"E07000193\", \"East Staffordshire\", 61000.0, 2092300000.0], [\"E07000194\", \"Lichfield\", 58000.0, 2285200000.0], [\"E07000195\", \"Newcastle-under-Lyme\", 64000.0, 2220800000.0], [\"E07000196\", \"South Staffordshire\", 62000.0, 2287800000.0], [\"E07000197\", \"Stafford\", 73000.0, 2628000000.0], [\"E07000198\", \"Staffordshire Moorlands\", 53000.0, 1669500000.0], [\"E07000199\", \"Tamworth\", 39000.0, 1201200000.0], [\"E07000200\", \"Babergh\", 50000.0, 1980000000.0], [\"E07000202\", \"Ipswich\", 71000.0, 2165500000.0], [\"E07000203\", \"Mid Suffolk\", 53000.0, 1998100000.0], [\"E07000207\", \"Elmbridge\", 76000.0, 7144000000.0], [\"E07000208\", \"Epsom and Ewell\", 44000.0, 2283600000.0], [\"E07000209\", \"Guildford\", 81000.0, 4770900000.0], [\"E07000210\", \"Mole Valley\", 48000.0, 2812800000.0], [\"E07000211\", \"Reigate and Banstead\", 84000.0, 4527600000.0], [\"E07000212\", \"Runnymede\", 47000.0, 2495700000.0], [\"E07000213\", \"Spelthorne\", 55000.0, 2282500000.0], [\"E07000214\", \"Surrey Heath\", 49000.0, 2582300000.0], [\"E07000215\", \"Tandridge\", 46000.0, 2764600000.0], [\"E07000216\", \"Waverley\", 75000.0, 4875000000.0], [\"E07000217\", \"Woking\", 57000.0, 3180600000.0], [\"E07000218\", \"North Warwickshire\", 32000.0, 1072000000.0], [\"E07000219\", \"Nuneaton and Bedworth\", 67000.0, 2050200000.0], [\"E07000220\", \"Rugby\", 64000.0, 2374400000.0], [\"E07000221\", \"Stratford-on-Avon\", 73000.0, 3518600000.0], [\"E07000222\", \"Warwick\", 83000.0, 3668600000.0], [\"E07000223\", \"Adur\", 31000.0, 1072600000.0], [\"E07000224\", \"Arun\", 83000.0, 2763900000.0], [\"E07000225\", \"Chichester\", 68000.0, 3094000000.0], [\"E07000226\", \"Crawley\", 56000.0, 1909600000.0], [\"E07000227\", \"Horsham\", 81000.0, 3669300000.0], [\"E07000228\", \"Mid Sussex\", 84000.0, 3981600000.0], [\"E07000229\", \"Worthing\", 60000.0, 2112000000.0], [\"E07000234\", \"Bromsgrove\", 53000.0, 2310800000.0], [\"E07000235\", \"Malvern Hills\", 40000.0, 1580000000.0], [\"E07000236\", \"Redditch\", 50000.0, 1620000000.0], [\"E07000237\", \"Worcester\", 52000.0, 1658800000.0], [\"E07000238\", \"Wychavon\", 68000.0, 2638400000.0], [\"E07000239\", \"Wyre Forest\", 51000.0, 1642200000.0], [\"E07000240\", \"St Albans\", 86000.0, 5908200000.0], [\"E07000241\", \"Welwyn Hatfield\", 57000.0, 2747400000.0], [\"E07000242\", \"East Hertfordshire\", 86000.0, 4429000000.0], [\"E07000243\", \"Stevenage\", 45000.0, 1615500000.0], [\"E07000244\", \"East Suffolk\", 121000.0, 4295500000.0], [\"E07000245\", \"West Suffolk\", 88000.0, 3159200000.0], [\"E08000001\", \"Bolton\", 127000.0, 3911600000.0], [\"E08000002\", \"Bury\", 92000.0, 3164800000.0], [\"E08000003\", \"Manchester\", 205000.0, 6642000000.0], [\"E08000004\", \"Oldham\", 96000.0, 2889600000.0], [\"E08000005\", \"Rochdale\", 91000.0, 2739100000.0], [\"E08000006\", \"Salford\", 126000.0, 4309200000.0], [\"E08000007\", \"Stockport\", 155000.0, 5797000000.0], [\"E08000008\", \"Tameside\", 106000.0, 3137600000.0], [\"E08000009\", \"Trafford\", 123000.0, 5633400000.0], [\"E08000010\", \"Wigan\", 168000.0, 5124000000.0], [\"E08000011\", \"Knowsley\", 71000.0, 2051900000.0], [\"E08000012\", \"Liverpool\", 196000.0, 6154400000.0], [\"E08000013\", \"St. Helens\", 87000.0, 2679600000.0], [\"E08000014\", \"Sefton\", 137000.0, 4644300000.0], [\"E08000015\", \"Wirral\", 151000.0, 5028300000.0], [\"E08000016\", \"Barnsley\", 121000.0, 3642100000.0], [\"E08000017\", \"Doncaster\", 143000.0, 4361500000.0], [\"E08000018\", \"Rotherham\", 123000.0, 3776100000.0], [\"E08000019\", \"Sheffield\", 233000.0, 7595800000.0], [\"E08000021\", \"Newcastle upon Tyne\", 118000.0, 4177200000.0], [\"E08000022\", \"North Tyneside\", 104000.0, 3390400000.0], [\"E08000023\", \"South Tyneside\", 66000.0, 2026200000.0], [\"E08000024\", \"Sunderland\", 125000.0, 3587500000.0], [\"E08000025\", \"Birmingham\", 417000.0, 13427400000.0], [\"E08000026\", \"Coventry\", 152000.0, 4636000000.0], [\"E08000027\", \"Dudley\", 147000.0, 4365900000.0], [\"E08000028\", \"Sandwell\", 134000.0, 3725200000.0], [\"E08000029\", \"Solihull\", 115000.0, 4692000000.0], [\"E08000030\", \"Walsall\", 117000.0, 3521700000.0], [\"E08000031\", \"Wolverhampton\", 120000.0, 3504000000.0], [\"E08000032\", \"Bradford\", 202000.0, 6342800000.0], [\"E08000033\", \"Calderdale\", 97000.0, 3094300000.0], [\"E08000034\", \"Kirklees\", 198000.0, 6375600000.0], [\"E08000035\", \"Leeds\", 381000.0, 13373100000.0], [\"E08000036\", \"Wakefield\", 179000.0, 5549000000.0], [\"E08000037\", \"Gateshead\", 95000.0, 2907000000.0], [\"E09000001\", \"City of London\", 9000.0, 1503000000.0], [\"E09000002\", \"Barking and Dagenham\", 90000.0, 2862000000.0], [\"E09000003\", \"Barnet\", 190000.0, 11229000000.0], [\"E09000004\", \"Bexley\", 135000.0, 5130000000.0], [\"E09000005\", \"Brent\", 149000.0, 6570900000.0], [\"E09000006\", \"Bromley\", 176000.0, 9592000000.0], [\"E09000007\", \"Camden\", 108000.0, 12852000000.0], [\"E09000008\", \"Croydon\", 192000.0, 7852800000.0], [\"E09000009\", \"Ealing\", 178000.0, 8330400000.0], [\"E09000010\", \"Enfield\", 142000.0, 6077600000.0], [\"E09000011\", \"Greenwich\", 136000.0, 6650400000.0], [\"E09000012\", \"Hackney\", 123000.0, 6457500000.0], [\"E09000013\", \"Hammersmith and Fulham\", 98000.0, 8192800000.0], [\"E09000014\", \"Haringey\", 128000.0, 7308800000.0], [\"E09000015\", \"Harrow\", 125000.0, 5812500000.0], [\"E09000016\", \"Havering\", 135000.0, 5400000000.0], [\"E09000017\", \"Hillingdon\", 144000.0, 5990400000.0], [\"E09000018\", \"Hounslow\", 140000.0, 6356000000.0], [\"E09000019\", \"Islington\", 110000.0, 8426000000.0], [\"E09000020\", \"Kensington and Chelsea\", 68000.0, 14144000000.0], [\"E09000021\", \"Kingston upon Thames\", 82000.0, 4633000000.0], [\"E09000022\", \"Lambeth\", 169000.0, 9480900000.0], [\"E09000023\", \"Lewisham\", 149000.0, 6675200000.0], [\"E09000024\", \"Merton\", 114000.0, 7182000000.0], [\"E09000025\", \"Newham\", 146000.0, 5270600000.0], [\"E09000026\", \"Redbridge\", 138000.0, 5892600000.0], [\"E09000027\", \"Richmond upon Thames\", 104000.0, 9401600000.0], [\"E09000028\", \"Southwark\", 156000.0, 9016800000.0], [\"E09000029\", \"Sutton\", 102000.0, 4610400000.0], [\"E09000030\", \"Tower Hamlets\", 147000.0, 8158500000.0], [\"E09000031\", \"Waltham Forest\", 140000.0, 5614000000.0], [\"E09000032\", \"Wandsworth\", 182000.0, 14505400000.0], [\"E09000033\", \"Westminster\", 102000.0, 13566000000.0], [\"N09000001\", \"Antrim and Newtownabbey\", 65000.0, 2086500000.0], [\"N09000002\", \"Armagh City, Banbridge and Craigavon\", 98000.0, 3018400000.0], [\"N09000003\", \"Belfast\", 143000.0, 4776200000.0], [\"N09000004\", \"Causeway Coast and Glens\", 56000.0, 1775200000.0], [\"N09000005\", \"Derry City and Strabane\", 60000.0, 1854000000.0], [\"N09000006\", \"Fermanagh and Omagh\", 44000.0, 1355200000.0], [\"N09000007\", \"Lisburn and Castlereagh\", 72000.0, 2570400000.0], [\"N09000008\", \"Mid and East Antrim\", 63000.0, 1978200000.0], [\"N09000009\", \"Mid Ulster\", 64000.0, 2041600000.0], [\"N09000010\", \"Newry, Mourne and Down\", 70000.0, 2233000000.0], [\"S12000005\", \"Clackmannanshire\", 25000.0, 822500000.0], [\"S12000006\", \"Dumfries and Galloway\", 73000.0, 2182700000.0], [\"S12000008\", \"East Ayrshire\", 61000.0, 1891000000.0], [\"S12000010\", \"East Lothian\", 56000.0, 2312800000.0], [\"S12000011\", \"East Renfrewshire\", 51000.0, 2136900000.0], [\"S12000013\", \"Na h-Eileanan Siar\", 13000.0, 400400000.0], [\"S12000014\", \"Falkirk\", 85000.0, 2762500000.0], [\"S12000017\", \"Highland\", 121000.0, 3944600000.0], [\"S12000018\", \"Inverclyde\", 38000.0, 1197000000.0], [\"S12000019\", \"Midlothian\", 53000.0, 1796700000.0], [\"S12000020\", \"Moray\", 46000.0, 1518000000.0], [\"S12000021\", \"North Ayrshire\", 61000.0, 1884900000.0], [\"S12000023\", \"Orkney Islands\", 11000.0, 366300000.0], [\"S12000026\", \"Scottish Borders\", 58000.0, 1972000000.0], [\"S12000027\", \"Shetland Islands\", 11000.0, 418000000.0], [\"S12000028\", \"South Ayrshire\", 54000.0, 1900800000.0], [\"S12000029\", \"South Lanarkshire\", 162000.0, 5572800000.0], [\"S12000030\", \"Stirling\", 48000.0, 1915200000.0], [\"S12000033\", \"Aberdeen City\", 108000.0, 4233600000.0], [\"S12000034\", \"Aberdeenshire\", 137000.0, 5438900000.0], [\"S12000035\", \"Argyll and Bute\", 43000.0, 1500700000.0], [\"S12000036\", \"Edinburgh, City of\", 267000.0, 11988300000.0], [\"S12000038\", \"Renfrewshire\", 95000.0, 3040000000.0], [\"S12000039\", \"West Dunbartonshire\", 46000.0, 1361600000.0], [\"S12000040\", \"West Lothian\", 96000.0, 3216000000.0], [\"S12000041\", \"Angus\", 60000.0, 1950000000.0], [\"S12000042\", \"Dundee City\", 60000.0, 1812000000.0], [\"S12000045\", \"East Dunbartonshire\", 63000.0, 2457000000.0], [\"S12000047\", \"Fife\", 177000.0, 5734800000.0], [\"S12000048\", \"Perth and Kinross\", 85000.0, 2966500000.0], [\"S12000049\", \"Glasgow City\", 270000.0, 8748000000.0], [\"S12000050\", \"North Lanarkshire\", 159000.0, 5008500000.0], [\"W06000001\", \"Isle of Anglesey\", 35000.0, 1015000000.0], [\"W06000002\", \"Gwynedd\", 51000.0, 1555500000.0], [\"W06000003\", \"Conwy\", 54000.0, 1706400000.0], [\"W06000004\", \"Denbighshire\", 44000.0, 1368400000.0], [\"W06000005\", \"Flintshire\", 81000.0, 2592000000.0], [\"W06000006\", \"Wrexham\", 68000.0, 2067200000.0], [\"W06000008\", \"Ceredigion\", 33000.0, 953700000.0], [\"W06000009\", \"Pembrokeshire\", 58000.0, 1769000000.0], [\"W06000010\", \"Carmarthenshire\", 91000.0, 2793700000.0], [\"W06000011\", \"Swansea\", 113000.0, 3604700000.0], [\"W06000012\", \"Neath Port Talbot\", 69000.0, 2007900000.0], [\"W06000013\", \"Bridgend\", 68000.0, 2142000000.0], [\"W06000014\", \"The Vale of Glamorgan\", 65000.0, 2385500000.0], [\"W06000015\", \"Cardiff\", 162000.0, 5864400000.0], [\"W06000016\", \"Rhondda, Cynon, Taff\", 116000.0, 3375600000.0], [\"W06000018\", \"Caerphilly\", 79000.0, 2354200000.0], [\"W06000019\", \"Blaenau Gwent\", 31000.0, 827700000.0], [\"W06000020\", \"Torfaen\", 43000.0, 1238400000.0], [\"W06000021\", \"Monmouthshire\", 51000.0, 1953300000.0], [\"W06000022\", \"Newport\", 72000.0, 2253600000.0], [\"W06000023\", \"Powys\", 65000.0, 1995500000.0], [\"W06000024\", \"Merthyr Tydfil\", 25000.0, 710000000.0]];\n\n        // Define the dt_args\n        let dt_args = {\"layout\": {\"topStart\": \"pageLength\", \"topEnd\": \"search\", \"bottomStart\": \"info\", \"bottomEnd\": \"paging\"}, \"order\": [], \"warn_on_selected_rows_not_rendered\": true};\n        dt_args[\"data\"] = data;\n\n        \n        new DataTable(table, dt_args);\n    });\n\u003c/script\u003e\n","content_type":"text/html"},"text/plain":{"content":"          code                     name  total_income_count  \\\n0    E06000001            Hartlepool UA             41000.0   \n1    E06000002         Middlesbrough UA             60000.0   \n2    E06000003  Redcar and Cleveland UA             65000.0   \n3    E06000004      Stockton-on-Tees UA             91000.0   \n4    E06000005            Darlington UA             52000.0   \n..         ...                      ...                 ...   \n355  W06000020                  Torfaen             43000.0   \n356  W06000021            Monmouthshire             51000.0   \n357  W06000022                  Newport             72000.0   \n358  W06000023                    Powys             65000.0   \n359  W06000024           Merthyr Tydfil             25000.0   \n\n     total_income_amount  \n0           1.258700e+09  \n1           1.812000e+09  \n2           1.885000e+09  \n3           3.039400e+09  \n4           1.653600e+09  \n..                   ...  \n355         1.238400e+09  \n356         1.953300e+09  \n357         2.253600e+09  \n358         1.995500e+09  \n359         7.100000e+08  \n\n[360 rows x 4 columns]","content_type":"text/plain"}}},"children":[],"key":"ouXlTzB57P"}],"key":"aCvZWId4rk"}],"key":"hdSrpHp1bg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Population data by age","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZkeztivU81"}],"identifier":"population-data-by-age","label":"Population data by age","html_id":"population-data-by-age","implicit":true,"key":"taTK3pMgtk"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Population data by age groups for UK local authorities can be downloaded from the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"N8kpNCbczY"},{"type":"link","url":"https://www.nomisweb.co.uk/datasets/pestsyoala","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"ONS data dashboard","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"X3x6p9voyc"}],"urlSource":"https://www.nomisweb.co.uk/datasets/pestsyoala","key":"iRA9AhmoFh"},{"type":"text","value":". The dataset provides detailed age breakdowns for each UK local authority, containing population counts for every age from 0 to 90+ years old across all local authorities in England, Wales, Northern Ireland, and Scotland. The data is stored as ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WghE32VGpg"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"age.csv","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"TlQOgED8EV"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv"},"internal":false,"protocol":"github","key":"XNSk4B0yfk"},{"type":"text","value":". The following table shows the dataset:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VSy2Gq85oN"}],"key":"g2MzTsCeCv"}],"key":"afThHQynh4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nfrom itables import init_notebook_mode, show\nimport itables.options as opt\nopt.maxBytes = \"1MB\"\ninit_notebook_mode(all_interactive=True)\n\npd.read_csv(\"../policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv\")","key":"teUQUEJRWu"},{"type":"outputs","id":"skT-DRQErcnx8ERpVlGm7","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cscript\u003e\n    let is_dark_theme = function () {\n        // Jupyter Lab\n        if ('jpThemeLight' in document.body.dataset)\n            return (document.body.dataset.jpThemeLight === \"false\");\n\n        // VS Code\n        if ('vscodeThemeKind' in document.body.dataset)\n            return document.body.dataset.vscodeThemeKind.includes('dark');\n\n        // Jupyter Book\n        if ('theme' in document.documentElement.dataset)\n            return document.documentElement.dataset.theme.includes('dark');\n\n        // Default\n        return window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n\n    if (is_dark_theme()) {\n        document.documentElement.classList.add('dark');\n    }\n    else {\n        document.documentElement.classList.remove('dark');\n    }\n\u003c/script\u003e\n","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},"children":[],"key":"DTk9QkcP8f"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"c6ab3fbdab1ff94600e51c14dfe3f701","path":"/policyengine-uk-data/build/c6ab3fbdab1ff94600e51c14dfe3f701.html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},"children":[],"key":"sjEyQjihMs"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"82dda12d147feefde781ca70cdef6586","path":"/policyengine-uk-data/build/82dda12d147feefde781ca70cdef6586.html"},"text/plain":{"content":"          code                  name       all       0       1       2  \\\n0    E06000001            Hartlepool   95366.0   915.0   960.0   981.0   \n1    E06000002         Middlesbrough  152650.0  1824.0  1798.0  1766.0   \n2    E06000003  Redcar and Cleveland  137938.0  1259.0  1359.0  1226.0   \n3    E06000004      Stockton-on-Tees  202415.0  1924.0  2078.0  2032.0   \n4    E06000005            Darlington  110562.0  1010.0  1115.0  1102.0   \n..         ...                   ...       ...     ...     ...     ...   \n355  W06000020               Torfaen   93419.0   928.0   975.0   934.0   \n356  W06000021         Monmouthshire   94572.0   738.0   796.0   830.0   \n357  W06000022               Newport  163628.0  1835.0  1984.0  1934.0   \n358  W06000023                 Powys  134439.0   952.0  1094.0  1083.0   \n359  W06000024        Merthyr Tydfil   58593.0   573.0   607.0   616.0   \n\n          3       4       5       6  ...      81     82     83     84     85  \\\n0    1066.0  1081.0  1069.0  1152.0  ...   500.0  442.0  465.0  407.0  429.0   \n1    1830.0  1889.0  1940.0  2081.0  ...   722.0  580.0  574.0  557.0  520.0   \n2    1367.0  1416.0  1419.0  1535.0  ...   992.0  851.0  854.0  828.0  685.0   \n3    2203.0  2266.0  2282.0  2451.0  ...  1133.0  993.0  941.0  885.0  819.0   \n4    1157.0  1168.0  1210.0  1152.0  ...   633.0  592.0  613.0  554.0  503.0   \n..      ...     ...     ...     ...  ...     ...    ...    ...    ...    ...   \n355  1027.0  1037.0  1048.0  1061.0  ...   611.0  545.0  461.0  451.0  412.0   \n356   828.0   828.0   878.0   917.0  ...   807.0  657.0  666.0  571.0  524.0   \n357  2011.0  2095.0  2054.0  2104.0  ...   858.0  734.0  689.0  658.0  554.0   \n358  1138.0  1206.0  1261.0  1264.0  ...  1164.0  979.0  982.0  878.0  808.0   \n359   649.0   679.0   685.0   738.0  ...   323.0  265.0  268.0  227.0  235.0   \n\n        86     87     88     89     90+  \n0    382.0  266.0  300.0  206.0   828.0  \n1    457.0  424.0  341.0  301.0  1120.0  \n2    637.0  546.0  456.0  370.0  1314.0  \n3    693.0  568.0  535.0  390.0  1570.0  \n4    448.0  377.0  354.0  277.0  1083.0  \n..     ...    ...    ...    ...     ...  \n355  341.0  349.0  285.0  252.0   813.0  \n356  477.0  442.0  379.0  322.0  1287.0  \n357  536.0  472.0  364.0  321.0  1282.0  \n358  735.0  616.0  530.0  455.0  1761.0  \n359  199.0  158.0  147.0  114.0   412.0  \n\n[360 rows x 94 columns]","content_type":"text/plain"}}},"children":[],"key":"a1LrWYmG6z"}],"key":"TEypM5ZfZB"}],"key":"E1CfdejNCp"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Preprocessing","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IjrVX2JMmX"}],"identifier":"preprocessing","label":"Preprocessing","html_id":"preprocessing","implicit":true,"key":"lG5YaVldrS"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In this section, we detail a preprocessing step necessary for our local authority level analysis: converting earnings percentiles into practical income brackets.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"iZxCdUFda1"}],"key":"rZ9OFDSf2l"},{"type":"heading","depth":3,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Convert earning percentiles to brackets","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"fTebPuFPcd"}],"identifier":"convert-earning-percentiles-to-brackets","label":"Convert earning percentiles to brackets","html_id":"convert-earning-percentiles-to-brackets","implicit":true,"key":"oOl1rSXMxx"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"To analyze earnings data effectively, we convert earning percentiles into earning brackets through the following process:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"q5AI3g3RVU"}],"key":"E5IRKz4wQH"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"First, we estimate the full distribution of earnings by:","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"cSvyQ5iKr8"}],"key":"RIgdNXLyVO"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":10,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Using known percentile data (10th to 90th) from the ASHE dataset","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Zxl7Suk8AO"}],"key":"vLjOAsu03p"}],"key":"je8cJaGmYt"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Extending this to estimate the 90th-99th percentiles using ratios derived from ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gVYTayl4Kj"},{"type":"link","url":"https://www.gov.uk/government/statistics/percentile-points-from-1-to-99-for-total-income-before-and-after-tax#:~:text=Details,in%20the%20Background%20Quality%20Report","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"this government statistics report","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"GmkDonRpyU"}],"urlSource":"https://www.gov.uk/government/statistics/percentile-points-from-1-to-99-for-total-income-before-and-after-tax#:~:text=Details,in%20the%20Background%20Quality%20Report","key":"Jo2oV4xLp3"}],"key":"Mz84XuttVa"}],"key":"xtgzqvKz5Q"}],"key":"X7T6b99w0g"}],"key":"Rfijg8Qb2r"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"This estimation allows us to map earnings data into brackets that align with policy thresholds.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"tS0qkq6hyK"}],"key":"Eq3FlitGU8"}],"key":"QO2xSZTwp0"}],"key":"Vdbnm57d6A"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"After estimating the full earnings distribution, we convert the data into income brackets. We calculate the number of jobs and total earnings for each local authority and income bracket based on the estimated earnings distribution. When we encounter local authorities with missing data, we estimate their earnings distribution pattern using data from local authorities with similar total number of taxpayers and total income levels.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"FMDZTtIlmT"}],"key":"rV5kkvqcpO"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The script ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"ueB1P2JVl5"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/create_employment_incomes.py","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"inlineCode","value":"create_employment_incomes.py","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Jr6AnG1HPo"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/create_employment_incomes.py","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/create_employment_incomes.py","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/create_employment_incomes.py"},"internal":false,"protocol":"github","key":"AjteUzwZSs"},{"type":"text","value":" generates ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"OhsC9GsomF"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"inlineCode","value":"employment_income.csv","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Ak3ZkZLwha"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv"},"internal":false,"protocol":"github","key":"sHnTgCvekt"},{"type":"text","value":" containing number of jobs (","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"DkQT2vR6uN"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv#L1","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"inlineCode","value":"employment_income_count","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"xJs7DyAamE"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv#L1","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","from":1,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv"},"internal":false,"protocol":"github","key":"eBITvQHOvp"},{"type":"text","value":") and total earnings (","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Jp1wwNYqpe"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv#L1","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"inlineCode","value":"employment_income_amount","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"qcD5ecP6Pw"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv#L1","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","from":1,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv"},"internal":false,"protocol":"github","key":"rLTrHnBDWQ"},{"type":"text","value":") for each local authority and income bracket. The following table shows employment and income across different brackets for local authorities:","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"V3DDdMZDmz"}],"key":"NsbkRGGWwi"}],"key":"bnTL7il5l4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nfrom itables import init_notebook_mode, show\nimport itables.options as opt\nopt.maxBytes = \"1MB\"\ninit_notebook_mode(all_interactive=True)\n\npd.read_csv(\"../policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv\")","key":"r0uHpp3o5d"},{"type":"outputs","id":"o-kM_j-e7kVwT73M1uQHz","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content":"\u003cscript\u003e\n    let is_dark_theme = function () {\n        // Jupyter Lab\n        if ('jpThemeLight' in document.body.dataset)\n            return (document.body.dataset.jpThemeLight === \"false\");\n\n        // VS Code\n        if ('vscodeThemeKind' in document.body.dataset)\n            return document.body.dataset.vscodeThemeKind.includes('dark');\n\n        // Jupyter Book\n        if ('theme' in document.documentElement.dataset)\n            return document.documentElement.dataset.theme.includes('dark');\n\n        // Default\n        return window.matchMedia('(prefers-color-scheme: dark)').matches;\n    }\n\n    if (is_dark_theme()) {\n        document.documentElement.classList.add('dark');\n    }\n    else {\n        document.documentElement.classList.remove('dark');\n    }\n\u003c/script\u003e\n","content_type":"text/html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},"children":[],"key":"nSZG5V2NlO"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"c6ab3fbdab1ff94600e51c14dfe3f701","path":"/policyengine-uk-data/build/c6ab3fbdab1ff94600e51c14dfe3f701.html"},"text/plain":{"content":"\u003cIPython.core.display.HTML object\u003e","content_type":"text/plain"}}},"children":[],"key":"HYURs55upC"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":3,"metadata":{},"data":{"text/html":{"content_type":"text/html","hash":"074a8be9f684bbbd36b85bb6b14e0cc0","path":"/policyengine-uk-data/build/074a8be9f684bbbd36b85bb6b14e0cc0.html"},"text/plain":{"content":"           code            name  employment_income_lower_bound  \\\n0     E06000001      Hartlepool                              0   \n1     E06000001      Hartlepool                          50000   \n2     E06000001      Hartlepool                          12570   \n3     E06000001      Hartlepool                          15000   \n4     E06000001      Hartlepool                          30000   \n...         ...             ...                            ...   \n4675  W06000024  Merthyr Tydfil                         200000   \n4676  W06000024  Merthyr Tydfil                         300000   \n4677  W06000024  Merthyr Tydfil                          50000   \n4678  W06000024  Merthyr Tydfil                          20000   \n4679  W06000024  Merthyr Tydfil                         500000   \n\n      employment_income_upper_bound  employment_income_count  \\\n0                           12570.0               758.154411   \n1                           70000.0              4042.906639   \n2                           15000.0               405.049313   \n3                           20000.0              1609.951463   \n4                           40000.0              5209.259896   \n...                             ...                      ...   \n4675                       300000.0                74.985344   \n4676                       500000.0                 0.000000   \n4677                        70000.0              4111.661887   \n4678                        30000.0              5329.828771   \n4679                            inf                 0.000000   \n\n      employment_income_amount  \n0                 4.765000e+06  \n1                 2.425744e+08  \n2                 5.583605e+06  \n3                 2.817415e+07  \n4                 1.823241e+08  \n...                        ...  \n4675              1.874634e+07  \n4676              0.000000e+00  \n4677              2.466997e+08  \n4678              1.332457e+08  \n4679              0.000000e+00  \n\n[4680 rows x 6 columns]","content_type":"text/plain"}}},"children":[],"key":"wLeBY2wlS5"}],"key":"bXNekqDBlC"}],"key":"I7wcQ61kkv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Methodology","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"XTmXzHf4zZ"}],"identifier":"methodology","label":"Methodology","html_id":"methodology","implicit":true,"key":"HR5CKLlc5q"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"This section describes our approach to creating accurate local authority level estimates through three key components: a loss function for evaluating accuracy, a calibration process for optimizing weights, and the mathematical framework behind the optimization. To see how well this methodology performs in practice, you can check our detailed ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"A7H0ExjixM"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/docs/validation/local_authorities.ipynb","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"validation results page","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"tgPjrChrsF"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/docs/validation/local_authorities.ipynb","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"docs/validation/local_authorities.ipynb","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/docs/validation/local_authorities.ipynb"},"internal":false,"protocol":"github","key":"vkvFfJWLee"},{"type":"text","value":" comparing our estimates against actual data at both local authority and national levels.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OxOQYWU4br"}],"key":"NA7hX5nCbk"},{"type":"heading","depth":3,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Loss function","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"Tw7YkssdDD"}],"identifier":"loss-function","label":"Loss function","html_id":"loss-function","implicit":true,"key":"GAZeqxLfqN"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"The file ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"NS6bODHCII"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"loss.py","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"fx83CXZoBN"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"kkyIfR0SiI"},{"type":"text","value":" defines a function ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"AUtxjLRpdV"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L8","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"create_local_authority_target_matrix","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"WZ8qCscviO"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L8","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","from":8,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"eRZAADMTxT"},{"type":"text","value":" that creates target matrices for comparing simulated data against actual local authority level data. The following process outlines how the function processes:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"XEdpB6EaDm"}],"key":"J542R75T1O"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Takes three main input parameters: dataset (defaults to ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"y6OP6rQYDz"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L15","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"enhanced_frs_2022_23","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mxAIBuWMEp"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L15","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","from":15,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"kRvgXxRZog"},{"type":"text","value":"), time_period (defaults to 2025), and an optional reform parameter for policy changes.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qGRANUaRcT"}],"key":"K1Rpf4yrtb"}],"key":"aZ2psC0opp"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Reads three files containing real data: ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"fsRITBzfRw"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"age.csv","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"kQgY38KeA6"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/age.csv"},"internal":false,"protocol":"github","key":"UJNFACuGIi"},{"type":"text","value":", ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"qK3xFSqi2d"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"total_income.csv","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"bTt0MiOJaW"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/total_income.csv"},"internal":false,"protocol":"github","key":"zxdA6AwIuz"},{"type":"text","value":", and ","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"gcxwVchzxU"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"inlineCode","value":"employment_income.csv","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"qbz6fAMvr3"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/targets/employment_income.csv"},"internal":false,"protocol":"github","key":"QsYW2bg4Ld"},{"type":"text","value":".","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"lvfRneiwFh"}],"key":"ocfUL3wPtO"}],"key":"ZkgYKDOBw8"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Creates a PolicyEngine Microsimulation object using the specified dataset and reform parameters.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"oDn7qWUYJl"}],"key":"GLxjSl8jIB"}],"key":"StXFWO8mPz"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Creates two main matrices: ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"EHkvhnFqcN"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L29","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"inlineCode","value":"matrix","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"yJh9yUlrx9"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L29","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","from":29,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"j6NeVOWGar"},{"type":"text","value":" for simulated values from PolicyEngine, and ","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"kjyg5EuCmK"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L30","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"inlineCode","value":"y","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"hmeAfQK6rl"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L30","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","from":30,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"zmKtSK9ATk"},{"type":"text","value":" for actual target values from both HMRC (income data) and ONS (age data).","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"kUMQJgozCI"}],"key":"NiMT52bG8P"}],"key":"R0gGCOOBk3"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Calculates total income metrics at the national level, computing both total amounts and counts of people with income.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"XZOFG6pGNR"}],"key":"vdPVvnWRlF"}],"key":"B1QHIPtt7f"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Processes age distributions by creating 10-year age bands from 0 to 80, calculating how many people fall into each band.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"LI3diY5YjP"}],"key":"KxnXq9DxhO"}],"key":"USXf8vVIdX"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Processes both counts and amounts for different income bands between £12,570 and £70,000, excluding people under 16 for employment income.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"uIUXSVqq1x"}],"key":"I8CnmhzFQO"}],"key":"XBBsizajUw"},{"type":"listItem","spread":true,"position":{"start":{"line":23,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Maps individual-level results to household level throughout the ","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"YLqlq3f0JL"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L33","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"inlineCode","value":"sim.map_result()","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"F22Olxeul1"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L33","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","from":33,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"uL7jeaWMJa"},{"type":"text","value":" function.","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"jIow9rcMH8"}],"key":"EEsX0Dioqm"}],"key":"j4os0GGP8k"},{"type":"listItem","spread":true,"position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"The function returns both the simulated matrix and the target matrix ","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"GryA1qMCgT"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L33","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"inlineCode","value":"(matrix, y)","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"FUDKk11s2b"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py#L33","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","from":33,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"gnmw5W9g7H"},{"type":"text","value":" which can be used for comparing the simulation results against actual data.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"NphHgRrnrb"}],"key":"AMVngoAgCK"}],"key":"XeSosno0iR"}],"key":"WI2UHv8ZIv"}],"key":"LEBfe0m5dW"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calibration function","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vEsx3zkRqy"}],"identifier":"calibration-function","label":"Calibration function","html_id":"calibration-function","implicit":true,"key":"fWEwF9NA7B"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The file ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cVyEo9oixl"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"calibrate.py","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Dw2EbSEUdJ"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"Q8Uw7QReJA"},{"type":"text","value":" defines a main ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"cPKB8qigCr"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L16","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"calibrate()","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"zJUEsfO8X6"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L16","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","from":16,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"HiyiUdeobw"},{"type":"text","value":" function that performs weight calibration for local authority level analysis.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VLbP8nSD4D"}],"key":"XTlABXyX2b"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"It imports necessary functions and matrices from other files including ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iNxW4gijd3"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L17","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"create_local_authority_target_matrix","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"osuI0b1q19"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L17","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","from":17,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"oFrUqkMeA1"},{"type":"text","value":", ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bFbx2Lj4Y8"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L21","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"create_national_target_matrix","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"HYwuE3WsRF"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L21","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","from":21,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"EtSAH4U9cG"},{"type":"text","value":" from ","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"O4r6QX2mOI"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"inlineCode","value":"loss.py","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"WvNWvf3aEO"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py","raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/loss.py"},"internal":false,"protocol":"github","key":"JwPuaXFYQ7"},{"type":"text","value":".","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"UJSIxjeEEx"}],"key":"qZSBdA7k12"}],"key":"KyLrG1AQHe"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Sets up initial matrices using the ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FcXF7DA6Yk"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L17","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"create_local_authority_target_matrix","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Z4d5UupBYT"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L17","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","from":17,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"FGWe5Qh7oF"},{"type":"text","value":" and ","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"nVrVhAXASU"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L21","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"inlineCode","value":"create_national_target_matrix","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"vnAGT53oZX"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L21","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","from":21,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"FVwtRtQRnX"},{"type":"text","value":" functions for both local authority and national level data.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"oh5uFkXek2"}],"key":"fejQZPOz4k"}],"key":"GvrcRvnAX5"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Creates a Microsimulation object using the ","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"uTUpeQ05eu"},{"type":"link","url":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L25","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"inlineCode","value":"enhanced_frs_2022_23","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"mnWMaviCUI"}],"urlSource":"https://github.com/PolicyEngine/policyengine-uk-data/blob/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py#L25","data":{"kind":"file","org":"PolicyEngine","repo":"policyengine-uk-data","reference":"7c782c4839a024c729350a3ff2c76922bf21b0d4","file":"policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py","from":25,"raw":"https://raw.githubusercontent.com/PolicyEngine/policyengine-uk-data/7c782c4839a024c729350a3ff2c76922bf21b0d4/policyengine_uk_data/datasets/frs/local_areas/local_authorities/calibrate.py"},"internal":false,"protocol":"github","key":"bpcJwB4o62"},{"type":"text","value":" dataset.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"UNWx0qYHRn"}],"key":"xyAQOftWA7"}],"key":"r41L2EbHZp"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Initializes weights for 360 local authority districts x 100180 households, starting with the log of household weights divided by local authority district count.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"f1sDJXfthI"}],"key":"qMwTBqEd0O"}],"key":"t8GhOG75Qv"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Converts all the matrices and weights into PyTorch tensors to enable optimization.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"lvnZn6Wgzu"}],"key":"YdiCOOEY9F"}],"key":"VcuO1peVnK"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Defines a loss function that calculates and combines both local authority level and national-level mean squared errors into a single loss value.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"moL0bQtu6H"}],"key":"MNtUDN4Hq3"}],"key":"ojrFcETCS2"},{"type":"listItem","spread":true,"position":{"start":{"line":17,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Uses Adam optimizer with a learning rate of 0.1 to minimize the loss over 512 epochs.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"XxEAv0Qhhk"}],"key":"LtBZByMPtO"}],"key":"bjSZpdua5J"},{"type":"listItem","spread":true,"position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"Every 100 epochs during optimization, it updates the weights and saves the current weights to a ","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"SQxRdHWEot"},{"type":"inlineCode","value":"weights.h5","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"pC2z4ML4Qq"},{"type":"text","value":" file.","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"PgnChBnk3W"}],"key":"CYGRmTd4f0"}],"key":"BMm0jxjzNL"}],"key":"BFep7n2rik"}],"key":"ouv2bHMnmh"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Optimization mathematics","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"UHyeCi8snC"}],"identifier":"optimization-mathematics","label":"Optimization mathematics","html_id":"optimization-mathematics","implicit":true,"key":"H7uffzcakb"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In this part, we explain the mathematics behind the calibration process that we discussed above. The optimization uses a two-part loss function that balances local authority level and national-level accuracy, combining both local and national targets into a single optimization problem. The mathematical formulation can be expressed as follows:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"m1e9q1xZpr"}],"key":"ToQ7HroZpU"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"For the local authority level component, we have:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AGdUfWBs5i"}],"key":"nY3T5yZuZy"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A set of households (","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"rRHoPqlcoR"},{"type":"inlineMath","value":"j","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ej\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"jctrdSf13o"},{"type":"text","value":") with known characteristics (","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"FC2Hxzd5Ze"},{"type":"inlineMath","value":"metrics_j","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003em\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003cmsub\u003e\u003cmi\u003es\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003emetrics_j\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.9456em;vertical-align:-0.2861em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003em\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003et\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ec\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\"\u003es\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"gt1j5ULLzd"},{"type":"text","value":") like income, age, etc.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"cOrPkMuZyy"}],"key":"oxeD9TgKgp"}],"key":"SyZswWqt4f"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"A set of local authorities (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"byLHjrhvuP"},{"type":"inlineMath","value":"i","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6595em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"dZnL3ZJICO"},{"type":"text","value":") with known target values (","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"z7M4Zap4MP"},{"type":"inlineMath","value":"y_c","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ey_c\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"R6s5HJ4m0X"},{"type":"text","value":") from official statistics","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"M1MrqG9GIY"}],"key":"daTzBbgxvJ"}],"key":"fyTkHbFFfC"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Weights in log space (","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"TC3sSWTUrQ"},{"type":"inlineMath","value":"w_{ij}","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ew_{ij}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003eij\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"Fa9l70B7uU"},{"type":"text","value":") that we need to optimize for each household in each local authority","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"TssHVna6FC"}],"key":"E98zkCocwQ"}],"key":"BQACpJr54X"}],"key":"FEI3RQTl4O"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Using these components, we calculate predicted local authority level statistics. For each local authority metric (e.g. total income), the predicted value is:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"o7O73WhKSA"}],"key":"ATvxhIZPBH"},{"type":"math","value":"\\text{pred}_c = \\sum_j (\\exp(w_{ij}) \\times \\text{metrics}_j)","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmtext\u003epred\u003c/mtext\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmunder\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/munder\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eexp\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003emetrics\u003c/mtext\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{pred}_c = \\sum_j (\\exp(w_{ij}) \\times \\text{metrics}_j)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.9386em;vertical-align:-0.2441em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003epred\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.0573em;\"\u003e\u003cspan style=\"top:-2.4559em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2441em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.4638em;vertical-align:-1.4138em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop op-limits\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.05em;\"\u003e\u003cspan style=\"top:-1.8723em;margin-left:0em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.05em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.05em;\"\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan class=\"mop op-symbol large-op\"\u003e∑\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.4138em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mop\"\u003eexp\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003eij\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e×\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003emetrics\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"1","key":"utAYKPVnyg"},{"type":"paragraph","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"vvE6nKDBck"},{"type":"inlineMath","value":"\\text{metrics}_j","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmtext\u003emetrics\u003c/mtext\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{metrics}_j\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.954em;vertical-align:-0.2861em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003emetrics\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"WduVn695sp"},{"type":"text","value":" represents the household-level characteristics for that specific metric (e.g. household income). We use exponential of weights to ensure they stay positive.","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"fr1mEuxqHL"}],"key":"pkTZHmEj53"},{"type":"paragraph","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"To measure how well our predictions match the real local authority data, we calculate the local authority mean squared error:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"lCOmckE7A5"}],"key":"vBXlrhkcV7"},{"type":"math","value":"\\text{MSE}_c = \\text{mean}((\\text{pred}_c / (1 + y_c) - 1)^2)","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmtext\u003eMSE\u003c/mtext\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmtext\u003emean\u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003epred\u003c/mtext\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{MSE}_c = \\text{mean}((\\text{pred}_c / (1 + y_c) - 1)^2)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eMSE\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003emean\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e((\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003epred\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.0573em;\"\u003e\u003cspan style=\"top:-2.4559em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2441em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e/\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8641em;\"\u003e\u003cspan style=\"top:-3.113em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"2","key":"buS71qohxq"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"qFI47qjkUt"},{"type":"inlineMath","value":"y_c","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ey_c\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"o72oldWO41"},{"type":"text","value":" are the actual target values from official statistics for each local authority. We use relative error (dividing by ","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"Gb8mvep6hh"},{"type":"inlineMath","value":"1 + y_c","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e1 + y_c\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"yA0S54wKOR"},{"type":"text","value":") to make errors comparable across different scales of metrics.","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"cUuOEqivgk"}],"key":"rc7gKgcTvl"},{"type":"paragraph","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"For the national component, we need to ensure our local authority level adjustments don’t distort national-level statistics. We aggregate across all local authorities:","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"lqrvdYPAMd"}],"key":"f3t6pmqazS"},{"type":"math","value":"\\text{pred}_n = \\sum_i (\\sum_j \\exp(w_{ij})) \\times \\text{metrics}_\\text{national}","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmtext\u003epred\u003c/mtext\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmunder\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/munder\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmunder\u003e\u003cmo\u003e∑\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/munder\u003e\u003cmi\u003eexp\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003ej\u003c/mi\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003emetrics\u003c/mtext\u003e\u003cmtext\u003enational\u003c/mtext\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{pred}_n = \\sum_i (\\sum_j \\exp(w_{ij})) \\times \\text{metrics}_\\text{national}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.9386em;vertical-align:-0.2441em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003epred\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.0573em;\"\u003e\u003cspan style=\"top:-2.4559em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2441em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.4638em;vertical-align:-1.4138em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop op-limits\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.05em;\"\u003e\u003cspan style=\"top:-1.8723em;margin-left:0em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.05em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.05em;\"\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan class=\"mop op-symbol large-op\"\u003e∑\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.2777em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mop op-limits\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.05em;\"\u003e\u003cspan style=\"top:-1.8723em;margin-left:0em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.05em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3.05em;\"\u003e\u003c/span\u003e\u003cspan\u003e\u003cspan class=\"mop op-symbol large-op\"\u003e∑\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.4138em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003eexp\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3117em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\"\u003eij\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e))\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e×\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8179em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003emetrics\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3361em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord text mtight\"\u003e\u003cspan class=\"mord mtight\"\u003enational\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"3","key":"tqR5vjkJuA"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"with corresponding mean squared error to measure deviation from national targets:","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"o0YfCqFIbJ"}],"key":"x4fVWSkjdq"},{"type":"math","value":"\\text{MSE}_n = \\text{mean}((\\text{pred}_n / (1 + y_n) - 1)^2)","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmtext\u003eMSE\u003c/mtext\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmtext\u003emean\u003c/mtext\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003epred\u003c/mtext\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/msub\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ey\u003c/mi\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmsup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmn\u003e2\u003c/mn\u003e\u003c/msup\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{MSE}_n = \\text{mean}((\\text{pred}_n / (1 + y_n) - 1)^2)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eMSE\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003emean\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e((\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003epred\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.0573em;\"\u003e\u003cspan style=\"top:-2.4559em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2441em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e/\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03588em;\"\u003ey\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.8641em;\"\u003e\u003cspan style=\"top:-3.113em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e2\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"4","key":"NB6CrUIslF"},{"type":"paragraph","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"The total loss combines both local authority and national errors:","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"co4DCd2sA1"}],"key":"pN83BzQfDA"},{"type":"math","value":"L = \\text{MSE}_c + \\text{MSE}_n","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eL\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003eMSE\u003c/mtext\u003e\u003cmi\u003ec\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003eMSE\u003c/mtext\u003e\u003cmi\u003en\u003c/mi\u003e\u003c/msub\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eL = \\text{MSE}_c + \\text{MSE}_n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eL\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eMSE\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ec\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eMSE\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.1514em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003en\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"5","key":"fhXaXmt2lB"},{"type":"paragraph","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"We initialize the weights using the original household weights from the survey data:","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"cH6KOsx2JR"}],"key":"gBTFpmZdcV"},{"type":"math","value":"w_{\\text{initial}} = \\ln(\\text{household}_{weight}/650)","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmtext\u003einitial\u003c/mtext\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eln\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmtext\u003ehousehold\u003c/mtext\u003e\u003cmrow\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003ee\u003c/mi\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmi\u003eg\u003c/mi\u003e\u003cmi\u003eh\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003cmi mathvariant=\"normal\"\u003e/\u003c/mi\u003e\u003cmn\u003e650\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ew_{\\text{initial}} = \\ln(\\text{household}_{weight}/650)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3361em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord text mtight\"\u003e\u003cspan class=\"mord mtight\"\u003einitial\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003eln\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003ehousehold\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3361em;\"\u003e\u003cspan style=\"top:-2.55em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ee\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003ei\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\"\u003eg\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003eh\u003c/span\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2861em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e/650\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"6","key":"ieeWijSLmM"},{"type":"paragraph","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"children":[{"type":"text","value":"where 650 is the number of local authorities. These weights are then iteratively optimized using the Adam (Adaptive Moment Estimation) optimizer with a learning rate of 0.1. The optimization process runs for 512 epochs, with the weights being updated in each iteration:","position":{"start":{"line":38,"column":1},"end":{"line":38,"column":1}},"key":"cM77GjwHKz"}],"key":"jZThQ1Ev1f"},{"type":"math","value":"w_{t+1} = w_t - 0.1 \\times \\nabla L(w_t)","position":{"start":{"line":40,"column":1},"end":{"line":40,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmrow\u003e\u003cmi\u003et\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003c/msub\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003c/msub\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e0.1\u003c/mn\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi mathvariant=\"normal\"\u003e∇\u003c/mi\u003e\u003cmi\u003eL\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmsub\u003e\u003cmi\u003ew\u003c/mi\u003e\u003cmi\u003et\u003c/mi\u003e\u003c/msub\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ew_{t+1} = w_t - 0.1 \\times \\nabla L(w_t)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6389em;vertical-align:-0.2083em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.3011em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003cspan class=\"mbin mtight\"\u003e+\u003c/span\u003e\u003cspan class=\"mord mtight\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2083em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.7333em;vertical-align:-0.15em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2806em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0.1\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e×\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e∇\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eL\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.02691em;\"\u003ew\u003c/span\u003e\u003cspan class=\"msupsub\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.2806em;\"\u003e\u003cspan style=\"top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:2.7em;\"\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size6 size3 mtight\"\u003e\u003cspan class=\"mord mathnormal mtight\"\u003et\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.15em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"7","key":"PXLRudnw5S"},{"type":"paragraph","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"children":[{"type":"text","value":"This formulation ensures that the optimized weights maintain both local local authority at the local authority level and global accuracy for national-level statistics. The Adam optimizer adaptively adjusts the weights to minimize both local authority level and national-level errors simultaneously, providing efficient convergence through adaptive learning rates and momentum. The resulting optimized weights allow us to accurately reweight household survey data to match both local authority level and national statistics to obtain accurate estimates of income distributions, demographics, and policy impacts for each parliamentary local authority while maintaining local authority with national totals.","position":{"start":{"line":42,"column":1},"end":{"line":42,"column":1}},"key":"aW7p1fY0bS"}],"key":"awkJmOyvCJ"}],"key":"OWHwW1LB85"}],"key":"Gvp0vrGgmy"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Constituency methodology","url":"/constituency-methodology","group":"PolicyEngine UK data"}}},"domain":"http://localhost:3000"},"project":{"title":"PolicyEngine UK data","authors":[{"nameParsed":{"given":"PolicyEngine","family":"Team","literal":"PolicyEngine Team"},"name":"PolicyEngine Team","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/policyengine/policyengine-uk-data","copyright":"2024","toc":[{"file":"intro.md"},{"file":"methodology.ipynb"},{"file":"imputations.md"},{"children":[{"file":"validation/national.ipynb"},{"file":"validation/constituencies.ipynb"},{"file":"validation/local_authorities.ipynb"}],"file":"validation/index.md"},{"file":"pension_contributions.ipynb"},{"file":"constituency_methodology.ipynb"},{"file":"LA_methodology.ipynb"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"methodology","title":"Methodology","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"imputations","title":"Imputations","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"validation.index","title":"Validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"validation.national","title":"National dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"validation.constituencies","title":"Constituency dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"validation.local-authorities","title":"Local authority dataset validation","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":2},{"slug":"pension-contributions","title":"Pension contributions","description":"","date":"","thumbnail":"","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"constituency-methodology","title":"Constituency methodology","description":"","date":"","thumbnail":"/policyengine-uk-data/build/nomis_screenshot1-1c5aacbebc004b4f300b10cfa9c042b8.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"la-methodology","title":"Local authority methodology","description":"","date":"","thumbnail":"/policyengine-uk-data/build/nomis_screenshot2-419913146d32c18ee9b6987e6438d897.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/policyengine-uk-data/build/manifest-5D5D9E8C.js";
import * as route0 from "/policyengine-uk-data/build/root-AA24SA6C.js";
import * as route1 from "/policyengine-uk-data/build/routes/$-5SFLQWPV.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/policyengine-uk-data/build/entry.client-PCJPW7TK.js");</script></body></html>